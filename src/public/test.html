<!DOCTYPE html>
<html>
  <head>
    <title>MySQL + Node.js</title>
  </head>
  <body>
    <h1>Danh sách người dùng</h1>
    <ul id="userList"></ul>
    <img
      src="https://drive.google.com/uc?export=view&id=1VDE3JNWnyJID93WuzfhA9B4CV0pnb1wd"
      alt="Mô tả ảnh"
    />

    <h2>Thêm người dùng mới</h2>
    <form id="addUserForm">
      <input type="text" id="name" placeholder="Tên" required />
      <input type="email" id="email" placeholder="Email" required />
      <button type="submit">Thêm</button>
    </form>

    <script>
      // Lấy danh sách người dùng
      async function fetchUsers() {
        const response = await fetch("http://localhost:3001/users");
        const users = await response.json();

        const userList = document.getElementById("userList");
        userList.innerHTML = users
          .map((user) => `<li>${user.name} - ${user.email}</li>`)
          .join("");
      }

      // Thêm người dùng mới
      document
        .getElementById("addUserForm")
        .addEventListener("submit", async (e) => {
          e.preventDefault();

          const newUser = {
            name: document.getElementById("name").value,
            email: document.getElementById("email").value,
          };

          await fetch("http://localhost:3001/users", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(newUser),
          });

          fetchUsers(); // Refresh danh sách
          e.target.reset(); // Xóa form
        });

      // Khởi chạy
      fetchUsers();
    </script>
  </body>
</html>
